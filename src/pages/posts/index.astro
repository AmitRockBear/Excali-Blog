---
import { getCollection, type CollectionEntry } from "astro:content"
import PageBaseLayout from "../../layouts/PageBaseLayout.astro"
import PostsList from "../../components/Posts/PostsList.astro"
import { sortCollectionEntriesFromNewest } from "../../utils/sort"

const postEntries = await getCollection("posts")
const numOfPosts = postEntries.length
const postEntriesFromNewest = sortCollectionEntriesFromNewest(
  postEntries
) as CollectionEntry<"posts">[]

const title = "Posts"
---

<PageBaseLayout title={title}>
  <div class="mx-8">
    <div class="flex justify-between mb-4">
      <h1 class="text-4xl font-bold">
        {title}
      </h1>
      <div class="flex flex-col justify-end">
        <h4 class="text-md font-bold">
          {`${[numOfPosts]} total`}
        </h4>
      </div>
    </div>
    <PostsList postEntries={postEntriesFromNewest} />
  </div>
</PageBaseLayout>
